<div class="property-list-container">
	<ul class="property-list">
	<% properties.each(function(property) { %>
		<li class="property-listing" data-lat="<%= property.escape("latitude") %>" data-lng="<%= property.escape("longitude") %>">
			<ul class="group">
				<li class="listing-component">
					<img src="<%= property.escape("property_photo_url") %>">
				</li>
				<li class="listing-component">
					<h3 class="listing-text"><a href="<%= "#" %>"><%= property.escape("address") %></a></h3>
					<button class="save-button">â˜… SAVE</button>
					<ul>
						<li>Price: <%= property.escape("price") %></li>
						<li class="listing-text">Borough: <%= property.escape("borough") %></li>
						<li class="listing-text">Neighborhood: <%= property.escape("neighborhood") %></li>
					</ul>
				</li>
			</ul>
		</li>
	<% }); %>
	</ul>
</div>

<div class="map-sidebar-container">
	<div id="map" class="map-scrolling"></div>
</div>

<script>

L.mapbox.accessToken = 'pk.eyJ1Ijoic2FpdG95ZXVuZyIsImEiOiJPOXA3aUowIn0.spWqAgo8-BgTGtYiLbOztg';
var map = L.mapbox.map('map', 'saitoyeung.jbj6oj44');
var geocoder = L.mapbox.geocoder('mapbox.places-v1');
var defaultLat = 40.714728;
var defaultLng = -73.998672;

map.setView([defaultLat, defaultLng], 12);

var address, borough, queryString, queryResult, lat, lng
	$(document).ready( function() {
		//want default on first property on page
		$(".main").on("mouseenter", "li.property-listing", function(event) {
			lat = $(event.currentTarget).attr("data-lat");
			lng = $(event.currentTarget).attr("data-lng");
		
			if(lat && lng) {
				map.setView([lat, lng], 15);
				L.marker([lat, lng]).addTo(map);
			}
			else {
				map.setView([defaultLat, defaultLng], 12);
			}
		});
	});
</script>